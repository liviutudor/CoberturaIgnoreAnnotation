apply plugin: 'java'
apply plugin: 'net.saliman.cobertura'

repositories {
    jcenter()
}

dependencies {
    compile 'org.slf4j:slf4j-api:1.7.7'
    compile 'org.apache.commons:commons-lang3:3.0'

    testCompile 'junit:junit:4.12'
}

cobertura {
    coverageFormats = ['html', 'xml']
    coverageIgnoreTrivial = true
    coverageIgnores = ['org.apache.commons.lang3.builder.ToStringBuilder.*']
    coverageExcludes = ['.*com.netflix.twitter.api.ta.beans.*', '.*Exception']
    coverageIgnoreMethodAnnotations = ['AvoidCoverage']
    coverageReportDir = new File("$buildDir/reports/cobertura")
    coverageCheckHaltOnFailure=true
    coverageCheckTotalBranchRate=90
    coverageCheckTotalLineRate=90
}

test.finalizedBy(project.tasks.coberturaCheck)
